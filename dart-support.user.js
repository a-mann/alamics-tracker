/*!
 * ==UserScript==
 * @name DartIT tracker-tweaker revo
 * @updateURL https://github.com/a-mann/alamics-tracker/raw/master/dart-support.user.js
 * @downloadURL https://github.com/a-mann/alamics-tracker/raw/master/dart-support.user.js
 * @description индивидуальные настройки для support.dartit.ru, support.alamics.ru;
 * @include https://support.dartit.ru/*
 * @include https://support.alamics.ru/*
 * @require https://cdnjs.cloudflare.com/ajax/libs/markdown-it/8.3.1/markdown-it.min.js
 * @grant unsafeWindow
 * @author mann
 * @license MIT
 * @version 1.4.13
 * ==/UserScript==
 */var ujs=function(e){function t(n){if(i[n])return i[n].exports;var l=i[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,t),l.l=!0,l.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(i,'a',i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=4)}([function(e,t,i){'use strict';function n(){const e=window.location.search.split('&');let t=e.filter(function(e){return'id'===e.split('=')[0]});return t[0].split('=')[1]}function l(){return document.querySelectorAll('.b-comment')}function a(e){return e.querySelector('.comment-wrap')}function d(){let e=Array.from(document.getElementById('comments-tbl').querySelectorAll('TR'));return e=e.splice(1,e.length),e.filter(function(e){return 1<e.querySelectorAll('td').length})}function s(){let e=d(),t=[];for(let n=0;n<e.length;n++)t.push(e[n].children[4].textContent);return i(1).eliminateDuplicates(t)}function o(e){let i='';return e.children[10]?(i=e.children[10].textContent,i=parseInt(i.split('/')[0])):i=parseInt(e.querySelector('.elapsed-time').textContent),i}Object.defineProperty(t,'__esModule',{value:!0}),i.d(t,'getTaskId',function(){return n}),i.d(t,'getAllCamments',function(){return l}),i.d(t,'getCommentFromRow',function(){return a}),i.d(t,'getAllCommentsRows',function(){return d}),i.d(t,'getAllWorkers',function(){return s}),i.d(t,'getRowTimeString',function(){return o})},function(e,t,i){'use strict';function n(){let e=window.location.search.substring(1).split('=');return e=e[1].split('&'),e[0]}function l(e){let t={};for(let n,l=0;l<e.length;l++)n=e[l],t[n]=!0;return Object.keys(t)}function a(e){let t=e.split('.'),i=t[0],n=t[1],l=t[2],a=l+'-'+n+'-'+i;return a=Date.parse(a),a}function d(e){let i='';return i=e.children[3]?e.children[3].textContent:e.querySelector('.comment-date').textContent,i=i.split(' '),a(i[0])}function s(e){let t=new Intl.DateTimeFormat('ru');return e=new Date(parseInt(e,10)),e=t.format(e),e}function o(e,t){Array.from(e).forEach(function(e){e.removeAttribute('hidden'),-1===t.indexOf(e.value)&&e.setAttribute('hidden','')})}function r(t,e){let n=[].slice.call(arguments,2),l={};e.onkeydown=function(i){i=i||window.event,l[i.keyCode]=!0;for(let e=0;e<n.length;e++)if(!l[n[e]])return;l={},t()},e.onkeyup=function(t){t=t||w.event,delete l[t.keyCode]}}function m(e,t,i){let n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&(200===n.status?t&&t(n.responseText):i&&i(n))},n.open('GET',e,!0),n.send()}function p(e,t){return t[4<e%100&&20>e%100?2:[2,0,1,1,1,2][5>e%10?e%10:5]]}function c(e,t){return e.indexOf(t)}Object.defineProperty(t,'__esModule',{value:!0}),i.d(t,'getURLAction',function(){return n}),i.d(t,'eliminateDuplicates',function(){return l}),i.d(t,'createISODate',function(){return a}),i.d(t,'getRowDateString',function(){return d}),i.d(t,'dateFormatter',function(){return s}),i.d(t,'modifySelectOptionsList',function(){return o}),i.d(t,'runOnKeys',function(){return r}),i.d(t,'loadByAjax',function(){return m}),i.d(t,'declOfNum',function(){return p}),i.d(t,'findInArray',function(){return c})},function(e){function t(e,t){var n=e[1]||'',l=e[3];if(!l)return n;if(t&&'function'==typeof btoa){var a=i(l),d=l.sources.map(function(e){return'/*# sourceURL='+l.sourceRoot+e+' */'});return[n].concat(d).concat([a]).join('\n')}return[n].join('\n')}function i(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e))));return'/*# '+('sourceMappingURL=data:application/json;charset=utf-8;base64,'+t)+' */'}e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(i){var n=t(i,e);return i[2]?'@media '+i[2]+'{'+n+'}':n}).join('')},n.i=function(e,t){'string'==typeof e&&(e=[[null,e,'']]);for(var l,a={},d=0;d<this.length;d++)l=this[d][0],'number'==typeof l&&(a[l]=!0);for(d=0;d<e.length;d++){var i=e[d];'number'==typeof i[0]&&a[i[0]]||(t&&!i[2]?i[2]=t:t&&(i[2]='('+i[2]+') and ('+t+')'),n.push(i))}},n}},function(e,t,i){function n(e,t){for(var n=0;n<e.length;n++){var i=e[n],l=g[i.id];if(l){l.refs++;for(var a=0;a<l.parts.length;a++)l.parts[a](i.parts[a]);for(;a<i.parts.length;a++)l.parts.push(m(i.parts[a],t))}else{for(var d=[],a=0;a<i.parts.length;a++)d.push(m(i.parts[a],t));g[i.id]={id:i.id,refs:1,parts:d}}}}function l(e,t){for(var n=[],l={},a=0;a<e.length;a++){var i=e[a],d=t.base?i[0]+t.base:i[0],s=i[1],o=i[2],r=i[3],m={css:s,media:o,sourceMap:r};l[d]?l[d].parts.push(m):n.push(l[d]={id:d,parts:[m]})}return n}function a(e,t){var i=f(e.insertInto);if(!i)throw new Error('Couldn\'t find a style target. This probably means that the value for the \'insertInto\' parameter is invalid.');var n=y[y.length-1];if('top'===e.insertAt)n?n.nextSibling?i.insertBefore(t,n.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),y.push(t);else if('bottom'===e.insertAt)i.appendChild(t);else throw new Error('Invalid value for parameter \'insertAt\'. Must be \'top\' or \'bottom\'.')}function d(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=y.indexOf(e);0<=t&&y.splice(t,1)}function s(e){var t=document.createElement('style');return e.attrs.type='text/css',r(t,e.attrs),a(e,t),t}function o(e){var t=document.createElement('link');return e.attrs.type='text/css',e.attrs.rel='stylesheet',r(t,e.attrs),a(e,t),t}function r(e,t){Object.keys(t).forEach(function(i){e.setAttribute(i,t[i])})}function m(e,t){var i,n,l,a;if(t.transform&&e.css)if(a=t.transform(e.css),a)e.css=a;else return function(){};if(t.singleton){var r=x++;i=b||(b=s(t)),n=p.bind(null,i,r,!1),l=p.bind(null,i,r,!0)}else e.sourceMap&&'function'==typeof URL&&'function'==typeof URL.createObjectURL&&'function'==typeof URL.revokeObjectURL&&'function'==typeof Blob&&'function'==typeof btoa?(i=o(t),n=h.bind(null,i,t),l=function(){d(i),i.href&&URL.revokeObjectURL(i.href)}):(i=s(t),n=c.bind(null,i),l=function(){d(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else l()}}function p(e,t,i,n){var l=i?'':n.css;if(e.styleSheet)e.styleSheet.cssText=C(t,l);else{var a=document.createTextNode(l),d=e.childNodes;d[t]&&e.removeChild(d[t]),d.length?e.insertBefore(a,d[t]):e.appendChild(a)}}function c(e,t){var i=t.css,n=t.media;if(n&&e.setAttribute('media',n),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}function h(e,t,i){var n=i.css,l=i.sourceMap,a=t.convertToAbsoluteUrls===void 0&&l;(t.convertToAbsoluteUrls||a)&&(n=k(n)),l&&(n+='\n/*# sourceMappingURL=data:application/json;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(l))))+' */');var d=new Blob([n],{type:'text/css'}),s=e.href;e.href=URL.createObjectURL(d),s&&URL.revokeObjectURL(s)}var g={},u=function(e){var t;return function(){return'undefined'==typeof t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),f=function(e){var t={};return function(i){return'undefined'==typeof t[i]&&(t[i]=e.call(this,i)),t[i]}}(function(e){return document.querySelector(e)}),b=null,x=0,y=[],k=i(8);e.exports=function(e,t){if('undefined'!=typeof DEBUG&&DEBUG&&'object'!=typeof document)throw new Error('The style-loader cannot be used in a non-browser environment');t=t||{},t.attrs='object'==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=u()),t.insertInto||(t.insertInto='head'),t.insertAt||(t.insertAt='bottom');var a=l(e,t);return n(a,t),function(e){for(var d=[],s=0;s<a.length;s++){var i=a[s],o=g[i.id];o.refs--,d.push(o)}if(e){var r=l(e,t);n(r,t)}for(var o,s=0;s<d.length;s++)if(o=d[s],0===o.refs){for(var m=0;m<o.parts.length;m++)o.parts[m]();delete g[o.id]}}};var C=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join('\n')}}()},function(e,t,i){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var n=i(1),l=i(5),a=i(9),d=i(11),s=i(14),o=i(15),r=i(16),m=i(17),p=i(20),c=i(21),h=i(22),g=i(23),u=i(24),f=i(25);// @license MIT
const b=n.getURLAction();'new'===b?f.a():'red'===b?(l.a(),p.a(),a.a(),'true'===localStorage.getItem('worker-time-count')&&r.a(),c.a(),s.a(),d.a(),m.a(),h.a(),g.a(),o.a(),u.a()):'user_page'===b?(l.a(),o.a()):void 0},function(e,t,i){'use strict';function n(){let e=document.querySelector('form[name="theForm"]');e.setAttribute('id','main-content');let t=e.getElementsByTagName('TABLE')[0];if(t){t.setAttribute('id','comments-tbl');let e=i(0).getAllCommentsRows();e.map(function(e){e.querySelectorAll('td')[5].firstElementChild.classList.add('comment-wrap')})}let n=document.querySelector('div.input_box');if(n){let e=document.createElement('DIV');e.setAttribute('id','user-toolbar'),e.classList.add('user-toolbar'),n.appendChild(e)}let l=document.querySelectorAll('table.theForm');if(l.length){l=l[0],l.id='task-footer';let e=l.querySelectorAll('table'),t=e[0];t.id='tbl-new-comment';let i=t.querySelectorAll('td')[1];i.id='new-comment-wrap';let n=document.createElement('div');n.id='tarea-wrap',n.classList.add('tarea-wrap'),n.appendChild(document.getElementById('text')),i.appendChild(n);let a=e[1].querySelector('table');a.id='tbl-status'}let a=document.querySelector('h1');a.id='task-title'}i.d(t,'a',function(){return n});var l=i(6),a=i.n(l)},function(e,t,i){var n=i(7);'string'==typeof n&&(n=[[e.i,n,'']]);var l,a={};a.transform=l;i(3)(n,a);n.locals&&(e.exports=n.locals),!1},function(e,t,i){t=e.exports=i(2)(void 0),t.push([e.i,'.onoff-opt{margin:0 6px 0 10px}.none{display:none!important}.hidden-elem{position:fixed!important;left:-999em;z-index:-1;visibility:hidden}.none.view{display:block!important}.ch_addr{margin:10px 10px 10px 0;vertical-align:top}.totop>input{margin:10px 0 0}.label_head{display:block;margin:0 0 20px}.clearfix:after,.clearfix:before{content:"";display:table;clear:both}.alist{float:right}.alist p{margin:0 0 10px;line-height:1;text-align:right}.bar-wrap{padding:8px 15px;background:#2d2d2d}#custom-project-list>li,#custom-workers-list>li{width:20%;float:left;cursor:pointer}#custom-project-list>li:first-child{display:none}.user-list{margin:2em 1em;padding:0;list-style-position:inside}.user-list>li{line-height:1.5}.selected{color:green}.btn-flat{padding:.5em;background:#f0f0f0;cursor:pointer}.btn-flat,.row-item{display:inline-block}.row-item{vertical-align:top}.row-item:not(:last-child){margin-right:1em}#settings-btn{margin:0 0 20px}#settings-box{display:none;margin:20px 0;padding:20px 0;outline:1px solid #414141}#settings-box.is-open{display:block}.user-title{color:#000;margin:0 0 .6em;font-size:20px;padding:0}.regular-link{color:#0054b9;outline:0!important}.time-list p{margin:5px 0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.time-list>p>span:first-child{padding-right:1em;cursor:pointer}:root .time-list-total{margin-top:1em;border-top:1px solid}.comment-collapsed{max-height:70px;overflow:hidden!important}.long-comment{width:100%!important;position:relative;padding-top:30px}.btn-collapse{position:absolute;top:0;right:0}.btn-collapse-all{position:fixed;top:10px;right:10px}:root .dates-list{width:150px;display:inline-block;margin:0 20px 0 0}.user-toolbar{margin:20px 0;padding:20px 10px;border-top:1px solid rgba(0,0,0,.7);overflow:hidden;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.user-toolbar__item{padding:10px 15px;background:hsla(0,0%,100%,.6);box-shadow:0 1px 1px rgba(0,0,0,.6)}:root .user-toolbar-title{margin:0 0 1em;padding:0;color:#000}:root #comments-tbl .comment-wrap{font-size:14px;width:100%!important;max-width:800px;overflow:hidden}:root #comments-tbl h1{font-size:120%;font-weight:400;margin:0 0 .4em;color:inherit}:root #comments-tbl blockquote{padding:10px 20px;margin:0 0 20px;border-left:5px solid #ccc}:root #comments-tbl blockquote p{margin:0}:root #comments-tbl blockquote p:not(:last-child){margin-bottom:1em}:root #comments-tbl ul{padding-left:.6em;list-style-position:inside}.section-title{color:inherit;margin:0 0 1em;padding:0!important}.s-info{color:gray;font-size:12px}.btn-insert-ls{position:absolute;top:100%;right:2em;transition:transform .3s}.btn-insert-ls.is-visible{transform:translateY(-150%)}.add-alert{width:24px;height:24px;display:inline-block;background-image:url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4gICAgPHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+ICAgIDxwYXRoIGQ9Ik0xMC4wMSAyMS4wMWMwIDEuMS44OSAxLjk5IDEuOTkgMS45OXMxLjk5LS44OSAxLjk5LTEuOTloLTMuOTh6bTguODctNC4xOVYxMWMwLTMuMjUtMi4yNS01Ljk3LTUuMjktNi42OXYtLjcyQzEzLjU5IDIuNzEgMTIuODggMiAxMiAycy0xLjU5LjcxLTEuNTkgMS41OXYuNzJDNy4zNyA1LjAzIDUuMTIgNy43NSA1LjEyIDExdjUuODJMMyAxOC45NFYyMGgxOHYtMS4wNmwtMi4xMi0yLjEyek0xNiAxMy4wMWgtM3YzaC0ydi0zSDhWMTFoM1Y4aDJ2M2gzdjIuMDF6Ii8+PC9zdmc+);cursor:pointer}#task-title .add-alert{vertical-align:middle;opacity:.5}#task-title .add-alert.selected{opacity:1}#text{resize:vertical}',''])},function(e){e.exports=function(e){var t='undefined'!=typeof window&&window.location;if(!t)throw new Error('fixUrls requires window.location');if(!e||'string'!=typeof e)return e;var i=t.protocol+'//'+t.host,n=i+t.pathname.replace(/\/[^\/]*$/,'/'),l=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var l=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(l))return e;var a;return a=0===l.indexOf('//')?l:0===l.indexOf('/')?i+l:n+l.replace(/^\.\//,''),'url('+JSON.stringify(a)+')'});return l}},function(e,t,n){'use strict';function i(){function e(e){function l(e,l){let d=n(0).getCommentFromRow(e),s=d.innerHTML.split('<br><br>');s=s.map(function(e){return-1<e.indexOf('<br>')?(e=e.split('<br>'),e=e.map(function(e){return e.trim()}),e=t(e,'*'),e=t(e,'&'),e=e.map(function(e){return a(e,l)}),e=e.join('')):(e=i(e.trim()),e=a(e,l)),'<p>'+e+'</p>'}),d.innerHTML=s.join('')}function a(e,t){return-1<['#','*','-','>'].indexOf(e.charAt(0))?e=t.render(e):e+='<br>',e}let d=markdownit();d.options.html=!0,d.options.linkify=!0,d.options.typographer=!0,d.options.breaks=!0,e.map(function(e){l(e,d)})}function t(e,t){let n,a=[],d='';for(let s=0;s<e.length;s++)n=s+1,e[s].charAt(0)===t&&e[n]&&e[n].charAt(0)===t?d+=l(e[s],t):e[n]&&e[n].charAt(0)===t?a.push(e[s]):(d+=l(e[s],t),a.push(d),d='');return a}function i(e){let t=/&gt;/g;return e.replace(t,'>')}function l(e,t='|'){let n='';return'*'===t?n='\n':'&'===t?(n=' ',e=i(e)):e='<p>'+e+'</p>',e+n}function a(e){const t=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;return e.replace(t,'<a href="$1" class="regular-link">$1</a>')}let d,s,o=n(0).getAllCommentsRows();n(10).addjs('https://cdnjs.cloudflare.com/ajax/libs/markdown-it/8.3.1/markdown-it.min.js',function(){e(o)});for(let e=0;e<o.length;e++)d=n(0).getCommentFromRow(o[e]),s=a(d.innerHTML),d.innerHTML=s}n.d(t,'a',function(){return i})},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.addjs=function(e,t){let i=document.getElementsByTagName('head')[0],n=document.createElement('script');n.onload=function(){t()},n.src=e,i.appendChild(n)}},function(e,t,i){'use strict';function n(){function e(e,t){let i=document.createDocumentFragment(),n=document.createElement('div'),l=n.cloneNode(!0);l.classList.add('comment-date'),l.id='comment-date',l.innerHTML=e[3].textContent,i.appendChild(l),l=n.cloneNode(!0),l.appendChild(e[0].firstElementChild),l.classList.add('id-checkbox'),i.appendChild(l),l=n.cloneNode(!0),l.classList.add('task-rank'),l.innerHTML=e[8].textContent+' \u043F\u0440\u0438\u043E\u0440\u0438\u0442\u0435\u0442';let a=e[7].textContent;1<a.length&&(l.innerHTML=l.innerHTML+'.<b class="deadline-date">\u0421\u0434\u0430\u0442\u044C '+a+'</b>'),i.appendChild(l),l=n.cloneNode(!0),l.classList.add('row-right');let d=n.cloneNode(!0);d.textContent=e[9].textContent,d.classList.add('task-status'),l.appendChild(d);let s=e[1].querySelectorAll('img')[1];s.classList.add('letter-addr'),l.appendChild(s);let o=e[1].querySelectorAll('a')[1];o.classList.add('comment-link'),l.appendChild(o);let r=n.cloneNode(!0);return r.classList.add('comment-no'),r.innerHTML=t,l.appendChild(r),i.appendChild(l),i}function t(e){let t=document.createDocumentFragment(),i=document.createElement('div'),n=i.cloneNode(!0);n.classList.add('comment-info');let l=document.createElement('span');l.classList.add('comment-author'),l.innerHTML=e[4].textContent,n.appendChild(l);let a=document.createElement('span');a.classList.add('comment-worker'),a.innerHTML=e[6].textContent,n.appendChild(a),t.appendChild(n);let d=i.cloneNode(!0);d.classList.add('work-time');let s=e[10].textContent.split('/');return s[0]='<span class="elapsed-time">'+s[0]+' \u043C\u0438\u043D.</span>',d.innerHTML=s[0],t.appendChild(d),t}function n(e){let t=document.createDocumentFragment(),i=document.createElement('div'),n=i.cloneNode(!0);n.classList.add('comment-body'),n.appendChild(e[5].firstElementChild.cloneNode(!0)),t.appendChild(n);let l=i.cloneNode(!0);return l.classList.add('actions-btn-wrap'),e[11].firstElementChild&&(n=i.cloneNode(!0),n.classList.add('btn-del-comment'),n.appendChild(e[11].firstElementChild),l.appendChild(n)),n=i.cloneNode(!0),n.classList.add('btn-edit-comment'),n.appendChild(e[1].firstElementChild),l.appendChild(n),t.appendChild(l),t}function d(e){return Array.from(e[2].querySelectorAll('a'))}s();let i=document.getElementById('comments-tbl'),m=r.getAllCommentsRows();m[0].previousElementSibling.classList.add('hidden-elem'),i.querySelector('tr').classList.add('hidden-elem'),m.map(function(s,r){let i=Array.from(s.querySelectorAll('td')),m=document.getElementById('comment-template').cloneNode(!0);m.removeAttribute('id'),s.appendChild(m);let p=m.querySelectorAll('.b-comment__row'),c=e(i,r);p[0].appendChild(c),p[1].appendChild(t(i)),p[2].appendChild(n(i));let h=d(i);if(!!h.length){let e=['png','jpg','gif'];h.map(function(t){let i=t.href.lastIndexOf('.');i=t.href.slice(i+1,t.href.length),t=-1<e.indexOf(i.toLowerCase())?l(t):a(i,t),p[3].appendChild(t)})}else m.removeChild(p[3]);m.addEventListener('mouseenter',function(){o(this)}),m.addEventListener('mouseleave',function(){o(this)}),i.map(function(e){e&&s.removeChild(e)})}),!1}function l(e){let t=document.createElement('div');t.classList.add('img-thumb','file-thumb');let i=document.createElement('img');i.src=e.getAttribute('href'),i.classList.add('thumb-pic'),e.appendChild(i);let n=d(e);return t.appendChild(e),t.appendChild(n),t.addEventListener('mouseenter',function(){let e=i.cloneNode(!1);e.classList.add('large-pic-preview'),e.classList.remove('thumb-pic'),this.appendChild(e)}),t.addEventListener('mouseleave',function(){this.removeChild(this.querySelector('.large-pic-preview'))}),t}function a(e,t){return t.classList.add('doc-thumb','file-thumb'),t.appendChild(d(t)),t.removeChild(t.firstElementChild),t}function d(e){let t=e.firstElementChild.title,i=document.createElement('div');return i.textContent=t,i.classList.add('attach-title'),i}function s(){let e=document.createElement('template'),t=document.createElement('div');t.classList.add('b-comment'),t.id='comment-template';let n;for(let e=0;4>e;e++)n=document.createElement('div'),n.classList.add('b-comment__row','b-comment__row_'+e),t.appendChild(n);return e.appendChild(t),document.body.appendChild(e),e}function o(e){let t=e.querySelector('.actions-btn-wrap');t.classList.toggle('is-visible')}i.d(t,'a',function(){return n});var r=i(0),m=i(12),p=i.n(m)},function(e,t,i){var n=i(13);'string'==typeof n&&(n=[[e.i,n,'']]);var l,a={};a.transform=l;i(3)(n,a);n.locals&&(e.exports=n.locals),!1},function(e,t,i){t=e.exports=i(2)(void 0),t.push([e.i,'.b-comment__row:last-child{padding-bottom:2em}.comment-wrap p:only-of-type{margin:0}.comment-wrap p:last-child{margin-bottom:0}#comments-tbl{margin:auto;padding:3em 0;background:#f0f0f0}#comments-tbl,#comments-tbl tbody,#comments-tbl tr{display:block}#comments-tbl tr:not(:last-child){margin-bottom:2em}.comment-body{width:100%}.comment-wrap p{line-height:1.4}.comment-wrap p:first-child{margin-top:0}.b-comment{max-width:720px;margin:auto;background:#fafafa;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);width:100%;font-size:12px;position:relative;box-sizing:border-box}.b-comment.b-comment_notify{margin-top:2em;padding:2em;color:#31708f;background:#d9edf7;border:1px solid #bce8f1}.b-comment.b-comment_notify .comments-update-link{display:inline-block;padding-left:1em;color:inherit}.b-comment__row{padding:1em 2em;display:-ms-flexbox;display:flex;-ms-flex-flow:row wrap;flex-flow:row wrap;position:relative}.b-comment__row:first-child{padding-top:2em}.b-comment__row:first-child .row-right{top:2em}.b-comment__row_0{color:gray}.task-rank,.task-status{padding:0 .5em 0 2em}.deadline-date{padding-left:1em}.id-checkbox{position:absolute;visibility:hidden;z-index:-1}.comment-link,.comment-no{margin-right:0!important}.b-comment__row.b-comment__row_1{padding-top:0;-ms-flex-pack:justify;justify-content:space-between;color:gray}.comment-info>span{display:inline-block;vertical-align:top}.comment-author{padding-right:2em;position:relative}.comment-author:after{content:"\\2192";position:relative;left:1em}.b-comment__row_2{font-size:14px;background:#fff;border-top:1px solid hsla(0,0%,63%,.2);border-bottom:1px solid hsla(0,0%,63%,.2);position:relative;overflow:hidden}.actions-btn-wrap{padding:1em;position:absolute;top:100%;right:0;transition:transform .3s}.actions-btn-wrap.is-visible{transform:translateY(-100%)}.btn-del-comment,.btn-edit-comment{display:inline-block;vertical-align:middle;height:24px;line-height:24px;position:relative;z-index:1}.btn-edit-comment{margin-left:.5em;top:3px}.btn-del-comment{width:70px}.btn-del-comment:after{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:-1;content:"\\423\\434\\430\\43B\\438\\442\\44C";color:#ccc;line-height:normal;border-bottom:1px solid}.btn-del-comment img{display:none}.btn-del-comment a{width:100%;height:100%;position:absolute}.b-comment__row.b-comment__row_3{padding-top:1.5em;padding-bottom:1.5em;-ms-flex-align:start;align-items:flex-start}.b-comment__row_3+.b-comment__row_4{border-top:1px solid hsla(0,0%,63%,.2)}.b-comment__row.b-comment__row_4{-ms-flex-pack:end;justify-content:flex-end}.row-right{position:absolute;top:1em;right:2em}.row-right>*{display:inline-block;vertical-align:middle}.row-right>:not(:last-child){margin-right:.7em}.img-thumb{max-width:150px}.img-thumb img:first-child{display:none}.img-thumb>a{display:block}.img-thumb .attach-title{margin-top:.3em}.thumb-pic{width:100%;object-fit:cover;max-height:200px;border:1px solid #ccc}.large-pic-preview{max-width:40vw;border:1px solid gray;position:absolute;top:90%;left:0;z-index:1}.doc-thumb{max-width:150px;background:#f3f3f3;font-size:11px;border:1px solid #ccc;text-align:center;text-decoration:none;color:inherit}.doc-thumb .attach-title{width:100%;padding:0 .5em;line-height:1.6;word-break:break-all;box-sizing:border-box;position:absolute;top:50%;transform:translateY(-50%)}.file-thumb{-ms-flex:1 1 25%;flex:1 1 25%;min-height:70px;position:relative}.file-thumb:nth-child(n+7){margin-top:2em}.file-thumb:not(:last-child){margin-right:1em}.attach-title{max-width:150px;text-align:center;line-height:normal;word-break:break-all}#comments-tbl tr:last-child .b-comment__row_0,#comments-tbl tr:last-child .b-comment__row_1{color:#000}',''])},function(e,t,i){'use strict';function n(){let e=document.getElementById('spended_time');return e?void(e.onkeyup=null,e.addEventListener('change',function(){let e=this.value;try{e=eval(e)}catch(t){alert('\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u044B\u0447\u0438\u0441\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u0442\u0440\u0430\u0447\u0435\u043D\u043D\u043E\u0433\u043E \u0432\u0440\u0435\u043C\u0435\u043D\u0438. \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0447\u0438\u0441\u043B\u0430 \u0438 \u0437\u043D\u0430\u043A\u0438 \xAB+\xBB, \xAB-\xBB, \xAB*\xBB, \xAB/\xBB \u0438 \u0441\u043A\u043E\u0431\u043A\u0438'),e=null}finally{null===e||isNaN(e)||(e=Math.round(e),0>=e&&(alert('\u041E\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0435 \u0438\u043B\u0438 \u043D\u0443\u043B\u0435\u0432\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432\u0440\u0435\u043C\u0435\u043D\u0438'),e=null)),this.value=e}}),console.info('load calculateElapsedTime')):(console.info('\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E \u043F\u043E\u043B\u0435 \u0432\u0432\u043E\u0434\u0430 \u0432\u0440\u0435\u043C\u0435\u043D\u0438 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F'),!1)}function l(e,t=8){let i='';if(null!==e&&!isNaN(e)&&0<e){t<<=0,(t===void 0||null===t||isNaN(t)||1>t)&&(t=24);let n,l,a;n=e/t/60<<0,i+=0<n?n+' \u0434. ':'',e-=60*(n*t),l=e/60<<0,i+=0<l?l+' \u0447. ':'',e-=60*l,a=e<<0,i+=a+' \u043C\u0438\u043D. ('+t+'-\u0447\u0430\u0441\u043E\u0432\u043E\u0439 \u0434\u0435\u043D\u044C)'}else i+='\u0427\u0442\u043E-\u0442\u043E \u0441\u043E \u0432\u0440\u0435\u043C\u0435\u043D\u0435\u043C \u043D\u0435 \u0442\u0430\u043A :(';return i}i.d(t,'a',function(){return n})},function(e,t,i){'use strict';function n(){function e(e,t=!1){if(t){let i=e.some(function(e){return e.id===t.id});i||e.push(t),10<e.length&&e.shift()}return e}let t=i(0).getTaskId(),n=document.getElementById('task-title').textContent.split(' - '),l=JSON.parse(localStorage.getItem('datalist'))||[];if(l=e(l),Array.isArray(n)&&2<=n.length){n=n[1].trim();let i={id:t,title:n+' '+t};l=e(l,i),localStorage.setItem('datalist',JSON.stringify(l))}let a=document.createElement('datalist');a.id='dl-gototask',document.body.appendChild(a);let d=document.getElementById('goTo');d.removeAttribute('style'),d.setAttribute('list','dl-gototask');for(let e,t=0;t<l.length;t++)e=document.createElement('option'),e.value=l[t].id,e.label=l[t].title,a.appendChild(e)}i.d(t,'a',function(){return n})},function(e,t,n){'use strict';function i(){let e,t=document.getElementById('user-toolbar'),s=n(0).getAllCommentsRows(),i=n(0).getAllWorkers(),m=[];for(let t=0;t<s.length;t++)e=s[t].children[3].textContent,e=e.split(' '),m.push(n(1).createISODate(e[0]));let p=n(1).eliminateDuplicates(m),c=l(i,s),h=a(c);h.classList.add('user-toolbar__item'),r(h,c,!0),h.addEventListener('click',function(t){t.target.classList.contains('time-list-total')||o(this,t)});let g=document.createElement('H3');g.textContent='\u0412\u0441\u044F \u0437\u0430\u0434\u0430\u0447\u0430',g.classList.add('user-toolbar-title'),h.insertBefore(g,h.firstChild),h.classList.add('user-toolbar__item');let u=function(e,t){function i(e,t){let i=document.createElement('SELECT');return i.setAttribute('id',e),i.classList.add(t),i}let l=document.createElement('DIV');l.classList.add('user-toolbar__item');let a=i('date-start-list','dates-list'),d=i('date-end-list','dates-list'),s=document.createElement('BUTTON');s.setAttribute('type','button'),s.textContent='\u041F\u043E\u0441\u0447\u0438\u0442\u0430\u0442\u044C';let o,r,m;for(let l=0;l<t.length;l++)m=n(1).dateFormatter(parseInt(t[l],10)),o=document.createElement('OPTION'),o.setAttribute('value',t[l]),o.innerHTML=m.toLocaleString('ru'),r=o.cloneNode(!0),a.appendChild(o),d.appendChild(r);l.appendChild(a),l.appendChild(d),l.appendChild(s);let p=document.createElement('H3');return p.textContent='\u0417\u0430 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u043F\u0435\u0440\u0438\u043E\u0434',p.classList.add('user-toolbar-title'),l.insertBefore(p,l.firstChild),e.insertBefore(l,e.lastChild),{box:l,start_list:a,end_list:d,btn:s}}(t,p);d(u,i,s),t.insertBefore(h,t.lastChild),!1}function l(e,t){let l,a,d,o={};for(let r=0;r<e.length;r++){d=0;for(let s=0;s<t.length;s++)l=n(0).getRowTimeString(t[s]),a=t[s].children[4]?t[s].children[4].textContent:t[s].querySelector('.comment-author').textContent,e[r]===a&&(d+=l,o[a]=d)}return o}function a(e){let t=document.createElement('DIV');t.classList.add('time-list'),t.id='workers-time';let i,n,l=0;for(let a in e)n=e[a],l+=n,i=document.createElement('p'),i.dataset.workertime=n,i.innerHTML='<span>'+a+'</span> <span>'+n+'</span>',t.insertBefore(i,t.lastChild);return t}function d(e,t,i){function d(e,t,i){return e.filter(function(e){let l=n(1).getRowDateString(e);if(l>=t&&l<=i)return e})}let o=e.start_list,m=e.end_list,p=e.box,c=e.btn;c.addEventListener('click',function(){let e=d(i,o.value,m.value),t=l(s(),e),n=a(t);p.querySelector('#range-timelist')&&p.removeChild(document.getElementById('range-timelist')),n.setAttribute('id','range-timelist'),p.appendChild(n),r(n,t)})}function s(){let e=document.getElementById('workers-time').querySelectorAll('.selected'),t=[];for(let n=0;n<e.length;n++)t.push(e[n].firstElementChild.textContent);return t}function o(e,t){function i(e,t,i){let n=parseInt(e.dataset.workertime);e.classList.contains('selected')?(e.classList.remove('selected'),e.classList.add('excluded'),i-=n):(e.classList.add('selected'),e.classList.remove('excluded'),i+=n),t.innerHTML=i,t.dataset.totaltime=i}let n=t.target,l=document.getElementById('workers-time-total'),a=parseInt(l.dataset.totaltime);for(;n!=e;){if('P'==n.tagName)return void i(n,l,a);n=n.parentNode}}function r(e,t,i){let n=0,l=document.createElement('p');for(let l in t)n+=t[l];if(i){let t=e.querySelectorAll('p');for(let e=0;e<t.length;e++)t[e].classList.add('selected')}return l.innerHTML='<span>\u0412\u0441\u0435\u0433\u043E:</span> <span id="workers-time-total" data-totaltime="'+n+'">'+n+'</span>',l.classList.add('time-list-total'),e.appendChild(l),n}n.d(t,'a',function(){return i})},function(e,t,i){'use strict';function n(){function e(e){e.parentNode.classList.add('hidden-elem')}function t(e,t){let i=e.files[0],n=i.size;t.dataset.total=t.dataset.total?parseInt(t.dataset.total)+parseInt(n):n;let l=document.getElementById('files-total');l.textContent=c(t.dataset.total)+' \u0438\u0437 3 \u041C\u0431';let a=document.createElement('li');a.innerHTML=i.name+'<span class="s-info">'+Math.ceil(n/1024)+' Kb</span>',a.classList.add('file-list-item');let d=document.createElement('span');d.classList.add('btn-remove-item'),d.dataset.fieldId=e.id,a.appendChild(d),t.appendChild(a),d.addEventListener('click',function(){r(this,l,t,n)})}let i=document.getElementById('tbl-new-comment'),n=document.getElementById('new-comment-wrap'),o=document.createElement('h2');o.textContent='\u041D\u043E\u0432\u044B\u0439 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439',o.classList.add('section-title'),n.insertBefore(o,n.firstElementChild);let p=document.createElement('div'),h=p.cloneNode(!0),g=document.createDocumentFragment(),u=document.createDocumentFragment(),f=document.getElementById('internal_worker'),b=f.parentNode;b.classList.add('worker-block'),g.appendChild(b);let x=document.getElementById('tbl-status'),y=a(x),k=l('\u0421\u0442\u0430\u0442\u0443\u0441',y);k.classList.add('frow-col-2-1'),g.appendChild(k),f=document.getElementById('priority_id'),k=l('\u041F\u0440\u0438\u043E\u0440\u0438\u0442\u0435\u0442',f),f.classList.add('frow-col-2-2'),g.appendChild(k),h.classList.add('task-fields-row','task-row-1'),h.appendChild(g),u.appendChild(h),h=p.cloneNode(!0),h.classList.add('task-fields-row','task-row-2');let C=p.cloneNode(!0);C.classList.add('time-block'),f=document.getElementById('spended_time'),k=l('\u0417\u0430\u0442\u0440\u0430\u0447\u0435\u043D\u043E',f),C.appendChild(k),f=document.getElementById('plan_time'),k=l('\u041F\u043B\u0430\u043D\u0438\u0440\u0443\u0435\u043C\u043E\u0435',f),C.appendChild(k),g.appendChild(C),f=document.getElementById('client_id');let L=l('\u041F\u0440\u043E\u0435\u043A\u0442',f);L.classList.add('frow-col-2-1'),g.appendChild(L);let v=document.getElementById('end_date').parentNode;v.width='',v.classList.add('deadline-calendar','frow-col-2-2'),v.removeChild(v.querySelector('script').nextSibling),g.appendChild(l('\u0421\u0440\u043E\u043A',v)),h.classList.add('task-fields-row','task-row-2'),h.appendChild(g),u.appendChild(h),h=p.cloneNode(!0),h.classList.add('task-fields-row','task-row-3');let E=document.getElementById('add_email'),I=E.parentNode;I.classList.add('add-email');let _=document.createElement('label');_.textContent='\u041F\u043E\u043B\u0443\u0447\u0430\u0442\u0435\u043B\u0438 \u0440\u0430\u0441\u0441\u044B\u043B\u043A\u0438 \u043F\u043E \u043F\u043E\u0447\u0442\u0435',I.insertBefore(_,I.firstElementChild);let A=document.getElementById('getEmailAddressesButton');A.value='\u041A\u043E\u043C\u0443 \u043F\u0438\u0441\u044C\u043C\u0430',I.appendChild(A),g.appendChild(I);let B=document.getElementById('problem_type').parentNode;B.classList.add('task-type');let S=document.createElement('label');S.textContent='\u0422\u0438\u043F \u0437\u0430\u0434\u0430\u0447\u0438',B.insertBefore(S,B.firstElementChild),g.appendChild(B),h.appendChild(g),u.appendChild(h),h=p.cloneNode(!0),h.classList.add('task-fields-row','task-row-4');let M=document.getElementById('FileInputs'),N=M.parentNode;N.classList.add('add-files');let T=document.createElement('h2');T.classList.add('section-title'),T.innerHTML='\u0424\u0430\u0439\u043B\u044B <span class="s-info">\u043E\u0431\u0449\u0438\u0439 \u043E\u0431\u044A\u0435\u043C <span id="files-total">\u0434\u043E 3 \u041C\u0431</span></span>',N.insertBefore(T,N.firstElementChild);let j=document.createElement('ul');j.id='files-list',j.classList.add('files-list'),N.insertBefore(j,M);let q=document.getElementById('fileInput0');q.setAttribute('onchange','addFileInput("FileInputs")'),q.addEventListener('change',function(){t(this,j),e(this)}),M.appendChild(m(q));let O=new MutationObserver(function(i){i.forEach(function(i){if('input'===i.addedNodes[0].tagName.toLowerCase()){let n=i.addedNodes[0];n.setAttribute('onchange','addFileInput("FileInputs")'),n.addEventListener('change',function(){t(this,j),e(this)});let l=m(n);i.target.appendChild(l)}})});O.observe(M,{attributes:!1,childList:!0,characterData:!1}),g.appendChild(N),h.appendChild(g),u.appendChild(h),h=p.cloneNode(!0),h.classList.add('task-fields-row','task-row-5');let z=document.querySelector('input[name=submitButton]');z.classList.add('btn-action'),g.appendChild(z),h.appendChild(g),u.appendChild(h),n.appendChild(u);let D=document.getElementById('add_email_worker'),H=document.createElement('ul');H.classList.add('email-send-list'),I.insertBefore(H,I.childNodes[2]),D.addEventListener('change',function(){s(this,E,H)}),y.addEventListener('change',function(){document.getElementById(this.value).checked=!0}),d(y),!1}function l(e,t){let i=document.createElement('div'),n=document.createElement('label');return n.textContent=e,i.appendChild(n),i.appendChild(t),i}function a(e){let t,i=document.createElement('select'),n=Array.from(e.querySelectorAll('tr'));return n.map(function(e){if(e.firstElementChild.getAttribute('colspan'))t=document.createElement('optgroup'),t.label=e.textContent,i.appendChild(t);else{let i=e.querySelector('input'),n=document.createElement('option');n.value=i.id,n.textContent=e.querySelector('label').textContent,t.appendChild(n)}}),i}function d(e){let t=document.querySelector('input[name=new_problem_status]:checked');for(let n of e.options)n.value===t.id&&(n.selected=!0)}function s(e,t,i){let n=e.options[e.selectedIndex],l=[n.text,e.value],a=l[1];if(''!==a.trim()){let d=t.value,s='';''===d?s=a:-1===d.indexOf(a)&&(s=d+(';'==a.charAt(d.length-1)?'':';')+a),t.value=s;let r=document.createElement('li');r.textContent=l[0],r.dataset.email=l[1],i.appendChild(r),r.addEventListener('click',function(){o(this,e,t)}),n.setAttribute('hidden',''),e.options[0].selected=!0}}function o(e,t,i){let n=e.dataset.email,l=i.value.split(';'),a=l.filter(function(e){if(e!==n)return e});i.value=a.join(';'),e.parentNode.removeChild(e);for(let l of t.options)l.value===n&&l.removeAttribute('hidden')}function r(e,t,i,n){let l=i.dataset.total-n;i.dataset.total=l,t.textContent=c(l)+' \u0438\u0437 3 \u041C\u0431';let a=e.dataset.fieldId;document.getElementById(a).parentNode.remove(),e.parentNode.remove();let d=Array.from(document.querySelectorAll('div.fileInput')),s=document.querySelectorAll('.btn-remove-item');for(let l=0;l<d.length;l++)d[l].firstElementChild.id='fileInput'+l,d[l].firstElementChild.name='fileInput'+l,s[l].dataset.fieldId='fileInput'+l}function m(e){let t=document.createElement('div'),i=t.cloneNode(!1);return t.classList.add('fake-file-input',e.classList[0]),t.appendChild(e),i.innerHTML='\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0444\u0430\u0439\u043B <span>\u041D\u0430\u0436\u043C\u0438 \u0438\u043B\u0438 \u0442\u0430\u0449\u0438 \u0435\u0433\u043E \u0441\u044E\u0434\u0430</span>',i.classList.add('btn-fake-file'),t.appendChild(i),t.addEventListener('dragenter',function(){this.classList.add('is-hover')}),t.addEventListener('dragleave',function(){this.classList.remove('is-hover')}),t.addEventListener('mouseup',function(){this.classList.remove('is-hover')}),t}function c(e){if(!e)return'0';let t=parseInt(Math.floor(Math.log(e)/6.931471805599453));return Math.round(e/Math.pow(1024,t),2)+' '+['Bytes','\u041A\u0431','\u041C\u0431','\u0413\u0431','\u0422\u0431'][t]}i.d(t,'a',function(){return n});var p=i(18),h=i.n(p)},function(e,t,i){var n=i(19);'string'==typeof n&&(n=[[e.i,n,'']]);var l,a={};a.transform=l;i(3)(n,a);n.locals&&(e.exports=n.locals),!1},function(e,t,i){t=e.exports=i(2)(void 0),t.push([e.i,'#task-footer tr:nth-child(2){height:0;overflow:hidden}.fake-file-input .btn-fake-file{padding:.7em 0 0;text-align:center;display:inline-block;font-size:16px;color:#82a5c3;cursor:pointer}.fake-file-input .btn-fake-file span{width:100%;display:inline-block;font-size:12px}.fake-file-input>input{width:100%;height:100%;position:absolute;top:0;left:0;opacity:0}#FileInputs br{display:none}.task-type>div select{margin-top:.3em}.task-type>div br{display:none}.email-send-list>li:after{content:"\\1F7A9";margin-left:.4em;color:red;display:inline-block;cursor:pointer}.add-email #getEmailAddressesButton{display:none}.add-email #add_email_worker{width:226px;display:inline-block;vertical-align:middle}.add-email #add_email{position:absolute;visibility:hidden;z-index:auto}.add-email label{display:block}:root .deadline-calendar #end_date{width:auto!important}:root .deadline-calendar input[type=button]{display:none}:root .deadline-calendar>img{position:absolute;top:.4em;right:.5em}:root .deadline-calendar>input[type=text]{padding-right:30px}.task-row-2 .time-block>div:after{content:"\\43C\\438\\43D";margin-left:.5em;display:inline-block;vertical-align:middle}.worker-block select{width:100%;margin:.5em 0 0}.task-fields-row .frow-col-2-2{width:120px}.task-fields-row .frow-col-2-1{width:190px;margin-right:30px}.task-fields-row td{padding:0;font-size:100%;display:block}.task-fields-row select{padding:.3em 0 .3em .2em}.task-fields-row input.input_field,.task-fields-row input[type=text],.task-fields-row select{width:auto;max-width:100%;height:2em;padding:.3em .6em;border:1px solid #9e9e9e;display:block;box-sizing:border-box}.task-fields-row input.input_field:focus,.task-fields-row input[type=text]:focus,.task-fields-row select:focus{border-color:#26a69a}#main-content{margin-bottom:0}#main-content br:last-child{display:none}.content{padding-bottom:0}#tbl-new-comment tbody,#tbl-new-comment td,#tbl-new-comment tr{display:block}#tbl-new-comment+br,#tbl-new-comment tr:first-child>td:first-child{display:none}#new-comment-wrap{max-width:720px;margin:auto}.tl{display:none}.tarea-wrap{position:relative;overflow:hidden}#text{width:100%;padding:.6em .8em;font-family:inherit;font-size:14px;border:0;box-sizing:border-box;box-shadow:inset 0 -2px 2px 0 rgba(0,0,0,.14),inset 0 1px 5px 0 rgba(0,0,0,.12),inset 0 3px 1px -2px rgba(0,0,0,.2)}.task-fields-row{max-width:720px;margin:1.6em auto}.task-fields-row label{margin:0 0 .5em;color:gray;display:inline-block}.task-row-1{display:-ms-flexbox;display:flex}.worker-block{width:300px;margin-right:70px;-ms-flex:0 0 300px;flex:0 0 300px}.worker-block input[type=radio]{display:inline-block;vertical-align:middle;position:relative;top:-.2em}.task-row-2,.task-row-2 .time-block{display:-ms-flexbox;display:flex}.task-row-2 .time-block{-ms-flex-pack:justify;justify-content:space-between}.task-row-2 .time-block>div{width:120px}.task-row-2 .time-block>div input{width:76%;display:inline-block;vertical-align:middle}:root .deadline-calendar{position:relative;padding:0!important;font-size:100%}:root .deadline-calendar>img,:root .deadline-calendar>input{display:inline-block;vertical-align:top;box-sizing:border-box}.task-row-3{display:-ms-flexbox;display:flex}.add-email{position:relative}.add-email a{display:none}.email-send-list{margin:.4em 0 .5em;padding:0;list-style-type:none}.email-send-list>li{margin:0;line-height:1}.email-send-list>li:before{content:"\\B7";font-size:1.5em;margin-right:.2em;display:inline-block;vertical-align:middle}.task-type select{min-width:190px}.add-files a{display:none}#FileInputs input:not(:first-child){margin-top:.3em;display:inline-block;vertical-align:middle}.btn-remove-item{width:12px;height:18px;margin-left:.3em;color:red;display:inline-block;vertical-align:middle;position:relative;cursor:pointer}.btn-remove-item:after{content:"\\1F7A9";position:absolute;top:0;left:0}.fake-file-input{width:225px;height:60px;border:1px dashed #82a5c3;background:#f4f6f8;text-align:center;border-radius:.5em;position:relative}.fake-file-input.is-hover{background:#d2dce5}.files-list{margin:-.5em 0 .5em;padding:0;list-style-type:none;transition:height .3s}.files-list .file-list-item{margin:.4em 0}.files-list .file-list-item .s-info{padding-left:.6em;display:inline-block;vertical-align:middle}#task-footer tbody,#task-footer td,#task-footer tr{display:block}.btn-action{height:36px;padding:0 1.6em;font-size:14px;color:#fff;border:0;border-radius:4px;background:#7eb519;cursor:pointer}',''])},function(e,t,i){'use strict';function n(){let e=document.getElementById('internal_worker');this.modifyProjectList=function(){let e=JSON.parse(localStorage.getItem('params_user_projects'));if(null===e||!e.length)return!1,!1;let t=document.getElementById('project_id')||document.getElementById('client_id'),i=t.options;l.modifySelectOptionsList(i,e)},this.modifyWorkersList=function(){let t=JSON.parse(localStorage.getItem('params_user_workers'));null===t&&(!1,t=[]);let n=e.options;if(t.length){let e=a.getAllWorkers(),d=[];for(let t,a=0;a<n.length;a++)t=l.findInArray(e,n[a].text),-1<t&&d.push(n[a].value);for(let e,n=0;n<d.length;n++)e=l.findInArray(t,d[n]),0>e&&t.push(d[n]);l.modifySelectOptionsList(n,t)}},this.setSelectedInWorkersList=function(){let t=a.getAllCommentsRows();t=t[t.length-1];let n=t.children[4].textContent;for(let t=0;t<e.options.length;t++)if(n===e.options[t].text){e.options[t].setAttribute('selected','');let i=document.createEvent('HTMLEvents');i.initEvent('change',!1,!0),e.dispatchEvent(i)}},document.getElementById('internal_worker')&&(this.modifyWorkersList(),this.setSelectedInWorkersList()),(document.getElementById('project_id')||document.getElementById('client_id'))&&this.modifyProjectList();let t=document.getElementById('goTo');t.removeAttribute('style'),!1}i.d(t,'a',function(){return n});var l=i(1),a=i(0)},function(e,t,i){'use strict';function n(){function e(e,t){''!==localStorage.getItem('task'+t)&&null!==localStorage.getItem('task'+t)&&e.classList.remove('none')}let t=document.getElementById('text'),i=document.getElementById('tarea-wrap'),n=l.getTaskId(),a=document.createElement('BUTTON');a.setAttribute('type','button'),a.classList.add('btn-insert-ls'),a.id='btn-insert-ls',a.innerHTML='\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0438\u0437 LS',a.classList.add('none'),i.appendChild(a),e(a,n),a.addEventListener('click',function(i){t.value=localStorage.getItem('task'+n),i.preventDefault()}),t.addEventListener('keyup',function(){localStorage.setItem('task'+n,this.value)}),t.addEventListener('blur',function(){e(a,n)}),i.addEventListener('mouseenter',function(){a.classList.add('is-visible')}),i.addEventListener('mouseleave',function(){a.classList.remove('is-visible')}),!1}i.d(t,'a',function(){return n});var l=i(0)},function(e,t,i){'use strict';function n(){function e(e){if(localStorage.getItem('selection')){let t=e.selectionStart,i=e.selectionEnd,n=localStorage.getItem('selection'),l=n.split('\n');l=l.map(function(e){return'> '+e}),n=l.join(''),e.value=e.value.substring(0,t)+n+e.value.substring(i,e.value.length),localStorage.removeItem('selection')}}let t=Array.from(a.getAllCamments());t.map(function(e){e.addEventListener('mouseup',function(){let e=window.getSelection();localStorage.setItem('selection',e)})});let i=document.getElementById('text');l.runOnKeys(function(){document.activeElement===i&&e(i)},i,'16','17',86),!1}i.d(t,'a',function(){return n});var l=i(1),a=i(0)},function(e,t,i){'use strict';function n(){function e(e,n){let l=document.getElementById('comments-tbl').querySelectorAll('.b-comment'),a=l.length,d=new DOMParser,s=d.parseFromString(e.trim(),'text/html'),o=s.body.querySelector('form[name=theForm]').firstElementChild,r=o.querySelectorAll('tr'),m=Array.from(r).filter(function(e){return 1<e.querySelectorAll('td').length}),p=m.length-1;if(p>a){let e=l[a-1].querySelector('input[type=checkbox]').id.split('_')[1];i(p-a,e);let d=localStorage.getItem('comments-update'+n);if(d&&'true'===d){let e={title:'\u041D\u043E\u0432\u044B\u0439 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439',tag:'new-comment-'+n,body:s.querySelector('h1 > font').textContent.trim()};t(e)}}}function t(e){let t;return'granted'===Notification.permission?t=new Notification(e.title,{tag:e.tag,body:e.body}):'denied'!==Notification.permission&&Notification.requestPermission(function(i){'granted'===i&&(t=new Notification(e.title,{tag:e.tag,body:e.body}))}),t}function i(e,t){let i=document.getElementById('page-notify');i||(i=document.getElementById('comment-template').cloneNode(!1),i.id='page-notify',i.classList.add('b-comment_notify'),document.getElementById('comments-tbl').appendChild(i)),i.textContent='\u0412 \u0437\u0430\u0434\u0430\u0447\u0435 '+e+' '+a.declOfNum(e,['\u043D\u043E\u0432\u044B\u0439 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439','\u043D\u043E\u0432\u044B\u0445 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u044F','\u043D\u043E\u0432\u044B\u0445 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0435\u0432']);let n=document.createElement('a');return n.href=window.location+'#'+t,n.target='_self',n.classList.add('regular-link','comments-update-link'),n.textContent='\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443',n.addEventListener('click',function(){window.location.href=this.href,location.reload(!1)}),i.appendChild(n),i}function n(e,t,i=!1){i?e.classList.contains('selected')?localStorage.setItem('comments-update'+t,'true'):localStorage.removeItem('comments-update'+t):'true'===localStorage.getItem('comments-update'+t)&&e.classList.add('selected')}let d=window.location,s=l.getTaskId(),o=document.createElement('div');o.id='upd-alert',o.classList.add('add-alert'),o.title='\u041F\u043E\u0434\u043F\u0438\u0441\u0430\u0442\u044C\u0441\u044F \u043D\u0430 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F \u043E \u043D\u043E\u0432\u044B\u0445 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u044F\u0445',document.getElementById('task-title').insertBefore(o,document.getElementById('subscribeElement')),o.addEventListener('click',function(t){this.classList.toggle('selected'),n(this,s,t)}),n(o,s);setInterval(function(){a.loadByAjax(d,function(t){e(t,s)},function(e){console.error(e)})},300000)}i.d(t,'a',function(){return n});var l=i(0),a=i(1)},function(e,t,i){'use strict';function n(){let e=window.location.hash;e=e.slice(1,e.length),setTimeout(function(){if(e){console.info('anchorLink start');let t=document.getElementById('checkbox_'+e).parentNode.parentNode.parentNode,i=t.offsetTop;l({duration:1e3,timing:function(e){return e},draw:function(e){a(i,e)}})}},600)}function l(e){let t=performance.now();requestAnimationFrame(function i(n){let l=(n-t)/e.duration;1<l&&(l=1);let a=e.timing(l);e.draw(a),1>l&&requestAnimationFrame(i)})}function a(e,t){let i=window.scrollY||document.documentElement.scrollTop;window.scrollTo(0,i+(e-i)*t)}i.d(t,'a',function(){return n})},function(e,t,i){'use strict';function n(){function e(e,t){if(!t.length)return!1;let i;Object.keys(e.childNodes).forEach(function(n){i=e.childNodes[n],0<=t.indexOf(i.dataset.id)&&i.classList.add('selected')})}let t=document.querySelector('form[name="theForm"]'),i=document.createElement('div');i.id='settings-box',t.insertBefore(i,t.firstChild);let n=document.createElement('button');n.innerHTML='\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C/\u0441\u043A\u0440\u044B\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438',n.id='settings-btn',n.type='button',n.addEventListener('click',function(){i.classList.toggle('is-open')}),t.insertBefore(n,t.firstChild);let a=document.createElement('div');a.classList.add('user-list');let d=document.createElement('h2');d.textContent='\u041E\u043F\u0446\u0438\u0438',d.classList.add('user-title'),a.appendChild(d);let s=document.createElement('span');s.id='countTimeBtn',s.classList.add('btn-flat','row-item'),s.textContent='\u041F\u043E\u0434\u0441\u0447\u0435\u0442 \u0432\u0440\u0435\u043C\u0435\u043D\u0438 \u0432 \u0437\u0430\u0434\u0430\u0447\u0435 - \u0412\u043A\u043B\u044E\u0447\u0435\u043D',localStorage.getItem('worker-time-count')||localStorage.setItem('worker-time-count','true'),s.addEventListener('click',function(){this.classList.toggle('selected'),this.classList.contains('selected')?(this.textContent='\u041F\u043E\u0434\u0441\u0447\u0435\u0442 \u0432\u0440\u0435\u043C\u0435\u043D\u0438 \u0432 \u0437\u0430\u0434\u0430\u0447\u0435 - \u0412\u043A\u043B\u044E\u0447\u0435\u043D',localStorage.setItem('worker-time-count','true')):(this.textContent='\u041F\u043E\u0434\u0441\u0447\u0435\u0442 \u0432\u0440\u0435\u043C\u0435\u043D\u0438 \u0432 \u0437\u0430\u0434\u0430\u0447\u0435 - \u0412\u044B\u043A\u043B\u044E\u0447\u0435\u043D',localStorage.setItem('worker-time-count','false'))}),a.appendChild(s),i.appendChild(a),function(){let e=document.getElementById('countTimeBtn');'true'===localStorage.getItem('worker-time-count')?(e.textContent='\u041F\u043E\u0434\u0441\u0447\u0435\u0442 \u0432\u0440\u0435\u043C\u0435\u043D\u0438 \u0432 \u0437\u0430\u0434\u0430\u0447\u0435 - \u0412\u043A\u043B\u044E\u0447\u0435\u043D',e.classList.add('selected')):(e.textContent='\u041F\u043E\u0434\u0441\u0447\u0435\u0442 \u0432\u0440\u0435\u043C\u0435\u043D\u0438 \u0432 \u0437\u0430\u0434\u0430\u0447\u0435 - \u0412\u044B\u043A\u043B\u044E\u0447\u0435\u043D',e.classList.remove('selected'))}(),function(){localStorage.getItem('params_user_projects')||localStorage.setItem('params_user_projects',JSON.stringify([]));let t=JSON.parse(localStorage.getItem('params_user_projects'));let n=l({id:'custom-project-list',title:'\u0421\u043E\u0431\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0441\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0435\u043A\u0442\u043E\u0432',source:'project_id',storage:t,storage_name:'params_user_projects'});i.insertBefore(n,i.firstChild),e(n,t)}(),function(){localStorage.getItem('params_user_workers')||localStorage.setItem('params_user_workers',JSON.stringify([]));let t=JSON.parse(localStorage.getItem('params_user_workers'));let n=l({id:'custom-workers-list',title:'\u0421\u043E\u0431\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0441\u043F\u0438\u0441\u043E\u043A \u0438\u0441\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u0435\u0439',source:'internal_worker',storage:t,storage_name:'params_user_workers'});i.insertBefore(n,i.firstChild),e(n,t)}(),!1}function l(e){let t=document.createElement('ul');t.id=e.id,t.classList.add('user-list','clearfix');let i=document.createElement('h2');i.innerHTML=e.title,i.classList.add('user-title'),t.appendChild(i);let n,l=document.getElementById(e.source),d=l.options,s=document.createDocumentFragment(),o=document.createElement('li');return Object.keys(d).forEach(function(t){return!(0>=d[t].value)&&void(n=o.cloneNode(!1),n.innerHTML=d[t].text,n.dataset.id=d[t].value,n.addEventListener('click',function(){a(e.storage,this,e.storage_name)}),s.appendChild(n))}),t.appendChild(s),t}function a(e,t,i){let n=t.dataset.id;if(-1===e.indexOf(n))e.push(n),t.classList.add('selected');else{let i=e.indexOf(n);e.splice(i,1),t.classList.remove('selected')}localStorage.setItem(i,JSON.stringify(e))}i.d(t,'a',function(){return n})}]);